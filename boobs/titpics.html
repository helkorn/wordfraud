<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titpics</title>
    <style>
        body {
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh.
            margin: 0;
            font-family: Arial, sans-serif.
        }
        #kuvaruletti {
            width: 300px;
            height: 300px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px.
        }
        #kuvaruletti img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute.
        }
    </style>
</head>
<body>
    <div id="kuvaruletti">
        <!-- Kuvaruletti will be implemented here -->
    </div>

    <script>
        async function fetchImages() {
            const response = await fetch('melonit.csv');
            const text = await response.text();
            const words = text.split('\n').map(word => word.trim()).filter(word => word.length > 0);
            const bannedWords = ["Bonnie ja Clyde", "Hauskat laukut", "Ismo ja Seppo", "Michelin-manit", "Mikkelin Pimut", "Sanni ja Alma"];
            const filteredWords = words.filter(word => !bannedWords.includes(word));
            const imagePaths = filteredWords.map(word => `titpics/${word}.png`);
            return imagePaths.sort(() => Math.random() - 0.5);
        }

        async function startImageRotation() {
            const images = await fetchImages();
            let index = 0;
            const getNextIndex = () => Math.floor(Math.random() * images.length);
            setInterval(() => {
                const img = new Image();
                img.src = images[getNextIndex()];
                img.onload = () => {
                    const isPortrait = img.naturalWidth < img.naturalHeight;
                    const isSquare = img.naturalWidth === img.naturalHeight;
                    const isLandscape = img.naturalWidth > img.naturalHeight;

                    if (isSquare) {
                        img.style.width = '300px';
                        img.style.height = '300px';
                        img.style.animation = 'zoomIn 5s infinite alternate';
                    } else if (isPortrait) {
                        img.style.width = '300px';
                        img.style.height = 'auto';
                        img.style.animation = 'moveUp 5s forwards';
                    } else if (isLandscape) {
                        img.style.width = 'auto';
                        img.style.height = '300px';
                        img.style.animation = 'moveLeft 5s forwards';
                    }
                    img.style.opacity = 0;
                    const kuvaruletti = document.getElementById('kuvaruletti');
                    kuvaruletti.innerHTML = '';
                    kuvaruletti.appendChild(img);
                    img.style.opacity = 1;
                };
                index++;
            }, 5000);
        }

        startImageRotation();
    </script>
</body>
</html>
