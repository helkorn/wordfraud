<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freefall</title>
    <link rel="stylesheet" type="text/css" href="style/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/johnboker/jquery.blink/master/jquery.blink.js"></script>
</head>
<body>
    <div id="c64">
        <div id="c64-startup">
            <div id="c64-startup-header" class="c64-font">**** COMMODORE 64 BASIC V2 ****<br /><br />64K RAM SYSTEM &nbsp;38911 BASIC BYTES FREE</div>
            <div id="c64-startup-prompt" class="c64-font">READY.<br /><span class="typewriter">LOAD"FREEFALL",8,1</span><span class="blink">█</span></div>
            <div id="c64-startup-footnote">
                <a href="https://github.com/kambrium/c64-startup-screen">c64-startup-screen@GitHub</a>
            </div>
        </div>
    </div>
    <div class="container hidden" id="content">
        <h1>Freefall</h1>
        <div>
            <label for="laiva">Valitse laiva:</label>
            <select id="laiva" onchange="updateKannet()">
                <option value="Viking MS Isabella">Viking MS Isabella</option>
                <option value="Silja Serenade">Silja Serenade</option>
                <option value="Viking Grace">Viking Grace</option>
                <option value="Tallink Megastar">Tallink Megastar</option>
                <option value="Eckerö Line Finlandia">Eckerö Line Finlandia</option>
                <option value="Tallink Silja Europa">Tallink Silja Europa</option>
                <option value="Viking Amorella">Viking Amorella</option>
                <option value="Finnlines Star">Finnlines Star</option>
                <option value="Viking Gabriella">Viking Gabriella</option>
                <option value="Viking Rosella">Viking Rosella</option>
                <option value="Baltic Princess">Baltic Princess</option>
                <option value="Silja Symphony">Silja Symphony</option>
                <option value="SeaWind Line">SeaWind Line</option>
            </select>
        </div>
        <div>
            <label for="kansi">Valitse kansi:</label>
            <select id="kansi">
                <!-- Kannet täytetään JavaScriptillä -->
            </select>
        </div>
        <div>
            <label for="kaide">Seisotko kaiteen päällä?</label>
            <select id="kaide">
                <option value="ei">Ei</option>
                <option value="kyllä">Kyllä</option>
            </select>
        </div>
        <button onclick="laskeKorkeus()">Hyppää</button>
        <div id="result" class="result"></div>
        <div id="helicopter" class="image-container hidden">
            <img src="helicopter.jpg" alt="Helikopteri">
            <div id="sakkolappu" class="c64-font"></div>
        </div>
    </div>
    <script>
        const laivat = {
            "Viking MS Isabella": { kannet: 11, vedenAlapuolella: 2 },
            "Silja Serenade": { kannet: 13, vedenAlapuolella: 3 },
            "Viking Grace": { kannet: 12, vedenAlapuolella: 2 },
            "Tallink Megastar": { kannet: 10, vedenAlapuolella: 1 },
            "Eckerö Line Finlandia": { kannet: 9, vedenAlapuolella: 2 },
            "Tallink Silja Europa": { kannet: 14, vedenAlapuolella: 3 },
            "Viking Amorella": { kannet: 10, vedenAlapuolella: 2 },
            "Finnlines Star": { kannet: 12, vedenAlapuolella: 2 },
            "Viking Gabriella": { kannet: 11, vedenAlapuolella: 2 },
            "Viking Rosella": { kannet: 9, vedenAlapuolella: 1 },
            "Baltic Princess": { kannet: 12, vedenAlapuolella: 3 },
            "Silja Symphony": { kannet: 13, vedenAlapuolella: 3 },
            "SeaWind Line": { kannet: 8, vedenAlapuolella: 2 }
        };

        function updateKannet() {
            const laivaValinta = document.getElementById('laiva').value;
            const laiva = laivat[laivaValinta];
            const kansiSelect = document.getElementById('kansi');
            kansiSelect.innerHTML = '';

            for (let i = laiva.vedenAlapuolella + 1; i <= laiva.kannet; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.text = `Kansi ${i}`;
                kansiSelect.appendChild(option);
            }
        }

        function laskeKorkeus() {
            const laivaValinta = document.getElementById('laiva').value;
            const valittuKansi = document.getElementById('kansi').value;
            const vedenAlapuolella = laivat[laivaValinta].vedenAlapuolella;
            let hyppyKorkeus = valittuKansi - vedenAlapuolella;

            const kaideValinta = document.getElementById('kaide').value;
            if (kaideValinta === 'kyllä') {
                hyppyKorkeus += 1; // Lisää yksi metri jos seisotaan kaiteen päällä
            }

            const resultDiv = document.getElementById('result');
            resultDiv.textContent = `Hyppykorkeus on ${hyppyKorkeus} kerrosta merenpintaan.`;
        }

        function typeWriter(text, i, elementId) {
            if (i < text.length) {
                document.getElementById(elementId).innerHTML += text.charAt(i);
                setTimeout(function() {
                    typeWriter(text, i + 1, elementId)
                }, 50);
            }
        }

        function startTextAnimation() {
            typeWriter('*** COMMODORE 64 BASIC V2 ***\n\n64K RAM SYSTEM  38911 BASIC BYTES FREE\n\nREADY.\n\n', 0, function() {
                document.getElementById("content").classList.remove("hidden");
                typeWriter('Freefall\n\nValitse laiva, kansi ja kaide.', 0, 'output');
            });
        }

        document.addEventListener("DOMContentLoaded", function() {
            startTextAnimation();
            updateKannet();
        });
    </script>
</body>
</html>
