<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Melonit</title>
    <style>
        body {
            background-color: #333;
            color: #ccc;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(6, 50px);
            grid-gap: 5px;
            margin-bottom: 20px;
        }
        .grid div {
            width: 50px;
            height: 50px;
            background-color: black;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 4px;
            font-size: 1.5em;
        }
        .grid div.pink {
            background-color: pink;
        }
        .grid div.wrong {
            background-color: #555;
        }
        .instruction {
            font-size: 1.2em;
            color: grey;
        }
        .end-text {
            display: none;
            font-size: 1.5em;
            color: grey;
        }
    </style>
</head>
<body>
    <div class="grid">
        <!-- 6x6 grid letters will be generated here -->
    </div>
    <div class="instruction">ETSI LEMPINIMI RINNOILLE</div>
    <div class="end-text"></div>
    <script>
        const words = [
            "ajovalot", "avokadot", "bazookat", "bon-bonit", "burritot", "daisarit",
            "etuessu", "etuvalot", "hinkit", "kannut", "kellukkeet", "ketunnokat",
            "manboobs", "meijerit", "melonit", "nuuskapussit", "roiskeläpät", "tissit", "tonkat"
        ];

        let grid = document.querySelector('.grid');
        let instruction = document.querySelector('.instruction');
        let endText = document.querySelector('.end-text');
        let selectedWord = words[Math.floor(Math.random() * words.length)];
        let letters = [];
        let correctPath = [];

        function createGrid() {
            for (let i = 0; i < 36; i++) {
                let div = document.createElement('div');
                div.textContent = String.fromCharCode(65 + Math.floor(Math.random() * 26));
                grid.appendChild(div);
                letters.push(div);
            }
            placeWord();
        }

        function placeWord() {
            // Choose a random starting point and direction, ensuring it doesn't start at the edges
            // This is a simple version, actual implementation should ensure the path doesn't exceed grid limits
            let startPos = Math.floor(Math.random() * 24) + 6; // avoids the first and last row/column
            let direction = Math.floor(Math.random() * 4); // 0: right, 1: down, 2: left, 3: up
            let x = startPos % 6;
            let y = Math.floor(startPos / 6);
            for (let char of selectedWord) {
                if (x < 0 || x >= 6 || y < 0 || y >= 6) {
                    placeWord();
                    return;
                }
                let index = y * 6 + x;
                correctPath.push(index);
                letters[index].textContent = char;
                if (direction === 0) x++;
                else if (direction === 1) y++;
                else if (direction === 2) x--;
                else if (direction === 3) y--;
            }
            highlightNextLetter();
        }

        function highlightNextLetter() {
            if (correctPath.length > 0) {
                letters[correctPath.shift()].classList.add('pink');
                setTimeout(highlightNextLetter, 10000);
            }
        }

        function handleClick(e) {
            if (e.target.classList.contains('pink')) {
                e.target.classList.remove('pink');
                e.target.classList.add('correct');
                if (correctPath.length === 0) {
                    endGame();
                }
            } else {
                e.target.classList.add('wrong');
                setTimeout(() => e.target.classList.remove('wrong'), 500);
            }
        }

        function endGame() {
            instruction.style.display = 'none';
            endText.textContent = `SINULLE OIKEAT RINNAT OVAT ${selectedWord.toUpperCase()}`;
            endText.style.display = 'block';
            setTimeout(() => {
                document.body.innerHTML = '<div style="color: grey; font-size: 2em;">END GAME</div>';
                setTimeout(() => location.reload(), 2000);
            }, 3000);
        }

        grid.addEventListener('click', handleClick);
        createGrid();
    </script>
</body>
</html>
